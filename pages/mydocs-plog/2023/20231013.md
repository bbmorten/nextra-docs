# 20231013 Jupyterlab, Scapy, pyshark, wireshark, MacosX, Telegram

## Telegram Bot

Telegramda BotFather'a git.

bot name : berry
Telegram Bot Username : BerryBoatBot
t.me/BerryBoatBot

```shell
Done! Congratulations on your new bot. You will find it at t.me/BerryBoatBot. You can now add a description, about section and profile picture for your bot, see /help for a list of commands. By the way, when you've finished creating your cool bot, ping our Bot Support if you want a better username for it. Just make sure the bot is fully operational before you do this.

Use this token to access the HTTP API:
6030148450:AAEvStADiRxLBiwNx-65nYApQ5wtiKaWCWg
Keep your token secure and store it safely, it can be used by anyone to control your bot.

For a description of the Bot API, see this page: https://core.telegram.org/bots/api
```

### Environment preparation

```shell
pip install requests aiosqlite python-telegram-bot schedule
pip install python-telegram-bot==13.12


```

###  To get the updates from the Bot

```shell
export BOT_TOKEN=6030148450:AAEvStADiRxLBiwNx-65nYApQ5wtiKaWCWg
curl -X POST "https://api.telegram.org/bot${BOT_TOKEN}/getUpdates"
```

###  Test Bot API

```shell
curl -X GET https://api.telegram.org/bot${BOT_TOKEN}/getMe

{"ok":true,"result":{"id":6030148450,"is_bot":true,"first_name":"berry","username":"BerryBoatBot","can_join_groups":true,"can_read_all_group_messages":false,"supports_inline_queries":false}}% 
```

### Get Python example

```shell
git clone https://gitlab.com/Athamaxy/telegram-bot-tutorial.git

```

###  Getting UserInfo from @userinfobot

@bbmorten
Id: 1246570232
First: Bülent
Last: Morten
Lang: tr

### Sending message

/Users/bulent/git-repos/MyUtils/scapy/use-telegram-bot.py

##  MacOSX

###  Getting Info for a network interface

```shell
networksetup -getinfo Wi-Fi

```

##  Wireshark

### Wireshark problem in Kali Linux

We're getting this error

```bash
└─# sudo dumpcap -D
sudo: unable to execute /usr/bin/dumpcap: Operation not permitted
```

Tried the following :`[-->](https://superuser.com/questions/1301499/running-wireshark-inside-a-centos-docker-container)

```bash
┌──(root㉿afe9a3bacefa)-[/tmp/libpcap]
└─# getcap $(which dumpcap)
/usr/bin/dumpcap cap_dac_override,cap_net_admin,cap_net_raw=eip
```

### pyshark

Round Trip Time (RTT) example

/Users/bulent/git-repos/MyUtils/scapy/pyshark-example1.py

```shell
> python3 pyshark-example1.py 

Source Address: 162.247.241.14
Source Port: 443
Destination address: 192.168.68.103
Destination port: 53331
RTT to ACK was: 0.021189000 seconds
Previous segment(s) not captured (common at capture start)

Source Address: 54.204.24.43
Source Port: 443
Destination address: 192.168.68.103
Destination port: 58474
RTT to ACK was: 0.165978000 seconds
Previous segment(s) not captured (common at capture start)

```

##  Scapy

### Preparing the environment for JupyterLab

Notebook içinde virtualenv kullanabilmek için

```shell
virtualenv env
source env/bin/activate
pip3 install scapy ipykernel
```

Visual Studio Code içine Python Interpreter'ı olarak ./wireshark/env/bin/python3 ekle.

Sonra Notebook: Select Notebook Kernel seçip Python 3 seçin.

## Jupyterlab

### Running in docker

```shell
cd /Users/bulent/git-repos/gathering
docker run -it --rm -p 10000:8888 \
  -v "${PWD}":/home/jovyan/work jupyter/datascience-notebook:2023-09-25
# or
docker run -it --rm -p 10000:8888 \
  -v "${PWD}":/home/jovyan/work jupyter/datascience-notebook
```

### Runnig a custom image

```Dockerfile
FROM jupyter/base-notebook

# Install in the default python3 environment
RUN pip install --no-cache-dir 'flake8' && \
    fix-permissions "${CONDA_DIR}" && \
    fix-permissions "/home/${NB_USER}"

# Install from the requirements.txt file
COPY --chown=${NB_UID}:${NB_GID} requirements.txt /tmp/
RUN pip install --no-cache-dir --requirement /tmp/requirements.txt && \
    fix-permissions "${CONDA_DIR}" && \
    fix-permissions "/home/${NB_USER}"
```

```shell
docker build -t gathering .
docker run -it -p 10000:8888 -v "${PWD}":/home/jovyan/work gathering
```
